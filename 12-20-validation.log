 rm ~/.kube/config

#drew/bash
 aws eks update-kubeconfig --region us-east-1 --name eks-drewpy
Added new context arn:aws:eks:us-east-1:602484972838:cluster/eks-drewpy to /root/.kube/config

#drew/bash
 kubectl get namespaces
NAME              STATUS   AGE
default           Active   43m
istio-system      Active   12m
kube-node-lease   Active   43m
kube-public       Active   43m
kube-system       Active   43m
namespace1        Active   12m
namespace2        Active   12m

#drew/bash
       kubectl get pods -n istio-system
        kubectl get pods -n namespace1
        kubectl get pods -n namespace2
NAME                               READY   STATUS    RESTARTS   AGE
ingress-gateway-849d8bfd96-6lqkc   1/1     Running   0          12m
istiod-6fbf849d94-mvlx8            1/1     Running   0          12m
NAME                   READY   STATUS    RESTARTS   AGE
app1-d59fd549d-pk827   2/2     Running   0          12m
NAME                    READY   STATUS    RESTARTS   AGE
app2-56c985b85b-td98j   2/2     Running   0          12m

#drew/bash
 kubectl get svc -n istio-system
NAME              TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)                                      AGE
ingress-gateway   NodePort    172.20.121.87   <none>        80:30080/TCP,443:30443/TCP,15021:31170/TCP   12m
istiod            ClusterIP   172.20.145.42   <none>        15010/TCP,15012/TCP,443/TCP,15014/TCP        13m

#drew/bash
 kubectl describe svc istio-ingressgateway -n istio-system
Error from server (NotFound): services "istio-ingressgateway" not found

#drew/bash
 kubectl describe svc ingress-gateway -n istio-system
Name:                     ingress-gateway
Namespace:                istio-system
Labels:                   app=istio-ingressgateway
                          app.kubernetes.io/instance=istio
                          app.kubernetes.io/managed-by=Helm
                          app.kubernetes.io/name=istio-ingressgateway
                          app.kubernetes.io/part-of=istio
                          app.kubernetes.io/version=1.24.2
                          helm.sh/chart=istio-ingress-1.24.2
                          install.operator.istio.io/owning-resource=unknown
                          install.operator.istio.io/owning-resource-namespace=istio-system
                          istio=ingressgateway
                          istio.io/rev=default
                          operator.istio.io/component=IngressGateways
                          operator.istio.io/managed=Reconcile
                          operator.istio.io/version=1.24.2
                          release=istio
Annotations:              <none>
Selector:                 app=istio-ingressgateway,istio=ingressgateway
Type:                     NodePort
IP Family Policy:         SingleStack
IP Families:              IPv4
IP:                       172.20.121.87
IPs:                      172.20.121.87
Port:                     http  80/TCP
TargetPort:               30080/TCP
NodePort:                 http  30080/TCP
Endpoints:                10.0.2.35:30080
Port:                     https  443/TCP
TargetPort:               30443/TCP
NodePort:                 https  30443/TCP
Endpoints:                10.0.2.35:30443
Port:                     healthz  15021/TCP
TargetPort:               15021/TCP
NodePort:                 healthz  31170/TCP
Endpoints:                10.0.2.35:15021
Session Affinity:         None
External Traffic Policy:  Cluster
Events:                   <none>

#drew/bash
 kubectl describe svc istiod -n istio-system
Name:              istiod
Namespace:         istio-system
Labels:            app=istiod
                   app.kubernetes.io/instance=istio
                   app.kubernetes.io/managed-by=Helm
                   app.kubernetes.io/name=istiod
                   app.kubernetes.io/part-of=istio
                   app.kubernetes.io/version=1.24.2
                   helm.sh/chart=istiod-1.24.2
                   install.operator.istio.io/owning-resource=unknown
                   install.operator.istio.io/owning-resource-namespace=istio-system
                   istio=pilot
                   istio.io/rev=default
                   operator.istio.io/component=Pilot
                   operator.istio.io/managed=Reconcile
                   operator.istio.io/version=1.24.2
                   release=istio
Annotations:       <none>
Selector:          app=istiod,istio=pilot
Type:              ClusterIP
IP Family Policy:  SingleStack
IP Families:       IPv4
IP:                172.20.145.42
IPs:               172.20.145.42
Port:              grpc-xds  15010/TCP
TargetPort:        15010/TCP
Endpoints:         10.0.1.33:15010
Port:              https-dns  15012/TCP
TargetPort:        15012/TCP
Endpoints:         10.0.1.33:15012
Port:              https-webhook  443/TCP
TargetPort:        15017/TCP
Endpoints:         10.0.1.33:15017
Port:              http-monitoring  15014/TCP
TargetPort:        15014/TCP
Endpoints:         10.0.1.33:15014
Session Affinity:  None
Events:            <none>

#drew/bash
 kubectl get gateway -n namespace1
No resources found in namespace1 namespace.

#drew/bash
 kubectl describe gateway ingress-gateway -n istio-system
Name:         ingress-gateway
Namespace:    istio-system
Labels:       <none>
Annotations:  <none>
API Version:  networking.istio.io/v1
Kind:         Gateway
Metadata:
  Creation Timestamp:  2024-12-20T18:21:00Z
  Generation:          1
  Resource Version:    6338
  UID:                 ce10bc8b-5ca8-4f15-b695-4aa3a8cbc503
Spec:
  Selector:
    Istio:  ingressgateway
  Servers:
    Hosts:
      *
    Port:
      Name:      http
      Number:    80
      Protocol:  HTTP
    Hosts:
      *
    Port:
      Name:      http-app1
      Number:    30080
      Protocol:  HTTP
    Hosts:
      *
    Port:
      Name:      http-app2
      Number:    30443
      Protocol:  HTTP
Events:          <none>

#drew/bash
 kubectl describe gateway egress-gateway -n istio-system
Name:         egress-gateway
Namespace:    istio-system
Labels:       <none>
Annotations:  <none>
API Version:  networking.istio.io/v1
Kind:         Gateway
Metadata:
  Creation Timestamp:  2024-12-20T18:21:00Z
  Generation:          1
  Resource Version:    6334
  UID:                 5b524218-2e0f-4dac-9585-05ae9664ea77
Spec:
  Selector:
    Istio:  egressgateway
  Servers:
    Hosts:
      *
    Port:
      Name:      https
      Number:    443
      Protocol:  HTTPS
    Tls:
      Credential Name:  egress-gateway-cert
      Mode:             SIMPLE
Events:                 <none>

#drew/bash
 kubectl get virtualservice -n namespace1
NAME                       GATEWAYS                           HOSTS   AGE
service1-virtual-service   ["istio-system/ingress-gateway"]   ["*"]   13m

#drew/bash
 kubectl get virtualservice -n namespace2
NAME                       GATEWAYS                           HOSTS   AGE
service2-virtual-service   ["istio-system/ingress-gateway"]   ["*"]   13m

#drew/bash
 kubectl describe virtualservice service1-virtual-service -n namespace1
Name:         service1-virtual-service
Namespace:    namespace1
Labels:       <none>
Annotations:  <none>
API Version:  networking.istio.io/v1
Kind:         VirtualService
Metadata:
  Creation Timestamp:  2024-12-20T18:21:01Z
  Generation:          1
  Resource Version:    6347
  UID:                 ab625ddb-f6e2-4cca-8b8d-1ee21608aa8e
Spec:
  Gateways:
    istio-system/ingress-gateway
  Hosts:
    *
  Http:
    Match:
      Port:  30080
      Uri:
        Prefix:  /app1
    Rewrite:
      Uri:  /
    Route:
      Destination:
        Host:  app1
        Port:
          Number:  80
Events:            <none>

#drew/bash
 kubectl describe virtualservice service2-virtual-service -n namespace2
Name:         service2-virtual-service
Namespace:    namespace2
Labels:       <none>
Annotations:  <none>
API Version:  networking.istio.io/v1
Kind:         VirtualService
Metadata:
  Creation Timestamp:  2024-12-20T18:21:01Z
  Generation:          1
  Resource Version:    6349
  UID:                 7c406b88-3db5-4e3b-a2d3-a83f1f550807
Spec:
  Gateways:
    istio-system/ingress-gateway
  Hosts:
    *
  Http:
    Match:
      Uri:
        Prefix:  /app2
    Route:
      Destination:
        Host:  app2
        Port:
          Number:  80
Events:            <none>